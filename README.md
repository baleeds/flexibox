FlexiBox
===

An application designed to host wireframes or other design resources and allow location based "FlexiBox" commenting by different stakeholders. 
Modelled after the Zurb tool, Notable.

### Third party tools ###
* npm - package manager for node.js libraries
* Bower - dependency downloads and management, works with GIT
* Grunt - JavaScript task runner (builds)
* RequireJS - provides the structure for writing modular code with dependency management
* Angular - provides the code organization for developing MVC
* Foundation - CSS framework for prototype styling
* ExpressJS - Nodejs framework for routing and parsing
* MongooseJS - Nodejs framework for queries and schemas
* NodeJS - server written in JavaScript
* Mongodb - database that uses documents instead of tables


### Future possibilities for third party tools (in case of amnesia...) ###
* jquery - basic JavaScript library, make sure Angular doesn't provide same functionality before pulling in!
* almond.js - alternate to full blown AMD loader (i.e. requireJS) for small apps or standalone libraries
* Jasmine - unit testing!!
* PhantomJS - unit testing
* Karma - Angular unit test runner

### Directories ###
* app - Source code for the application
* bower_components - Bower will install all the dependencies here
* dependencies - Dependency files from bower components that are used by the webapp
* dist - Target directory of the build.  Includes the production index.html for testing the final bundled version
* node_modules - Contains Grunt plugins for project
* test - A visual test HTML page pointed directly at the source for development (*Directory will contain unit test configuration in future!*)
* vendor - Non-bower libraries that are used by the webapp and can't/shouldn't be downloaded through bower.


#Usage

Prior to building locally, you need to follow these steps ONCE to set up your environment

1. Install node.js and npm (http://nodejs.org/download/)

2. Configure the proxy by entering the following command:

        npm config set proxy http://surf-proxy.intranet.db.com:8080

3. Install Grunt command line (globally) by entering the following command:

        npm install -g grunt-cli

4. Install MongoDB (Reference links below)
    - http://docs.mongodb.org/manual/installation/
    - http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/

To run a local build, from the root directory (where this file is):

1. 'npm install' to install local dependencies to project

2. 'grunt' to build the project

3. Refresh your workspace to see directories and bundled files generated by build which are located in the 'dist' folder.

Prior to testing in your browser, you need to follow these steps in a new terminal window:

1. Start MongoDB

        cd /usr/local/mongodb
        ./bin/mongod

2. Start Node.js server

        cd <workspace>/flexibox-with-modularjs/FlexiBox-webapp
        node server.js

You can now start writing code and testing it by pointing your browser to 'index.html'.  This will
load all the individual source files to make it easier to debug in a browser.

Once development is complete, run 'grunt production' to generate bundled and minified files: one that includes all external
dependencies and one that does not.  The bundled files will be copied, along with the production index.html to the
'dist' folder.

#Project Details

Most of the FlexiBox core functionality lives in the app folder.  This is where we store our directives, controllers, views, factories (services) and other important files.

* directives: Directives are attached to the DOM by inserting them into a tag.  Adding a directive to an element attaches functionality to that element, allowing Angular to manipulate the DOM.  In MVC terms, directives connect the controller to the view.
* controllers: Controllers are attached to the DOM using the ng-controller directive.  They are used to add behavior to the $scope object, which can be accessed in the DOM for logic and data-binding.  For instance, we load our projects into $scope.projects, and then we can display all projects on the front end. The DOM reflects real-time changed to the $scope variable.  DOM should never be directly manipulated by a controller.
* views: Views are html segments that are loaded into our index.html depending on the current route.  When we have specified a projectId in the URL, the project view is loaded into the index.
* factories: Factories contain the code that provides calls to the API.  Factories are a singleton object that can be called into controllers and used to retrieve data.  In MVC terms, factories connect the model to the controller.
* other files....

	* app.js - The declaration of our primary FlexiBox module.  Other angular components are injected into the module in this file.
	* main.js - Provides info for dependencies, loads dependency and then bootstraps Angular
	* namespace.js - Provides an easily changed name format.
	* routes.js - Configures URL routes to load respective views and controllers.

#Todo's

##Cleanup
- [ ] Make the API match up with the REST API design document.
    - [ ] Creating a new project does POST and gets entire db back as a response
    - [ ] Code to use entryUrl, setsUrl, postsUrl, and commentsUrl to make calls rather than building url's in UI code
    - [ ] Needs a more through review for other issues...
- [ ] Move the uploads folder out of the project folder. Requires implementing REST API to retrieve static images from server.
- [ ] Move code for each route in server.js to it's own file rather than dumping them all in one large file
- [X] Remove requirement to select portion of image to add a comment (this requirement doesn't work in FF so has made adding comments non-functional in that browser)
- [ ] Don't filter on id from the filter box (name and description only)
- [ ] Filter feature shouldn't be visible on image details page
- [ ] Post comment button is disabled when not logged in but styling doesn't show that well.
- [ ] Test concurrent user operations
- [ ] Cleanup and test code added to draw contextual comment box (not working well from initial tests)
- [ ] index.html to use built javascript files and test index page for debug mode
- [x] Document MongoDB install and server start up instructions in README
- [x] Use version of foundation.css from bower dependencies
- [ ] Enter key inside username text field doesn't submit login

##Features
- [ ] Add unit testing
- [ ] Add a thumbnail gallery at the bottom to navigate to other posts in a set
- [ ] Ability to edit title and description for project, set, post
- [ ] Pagination of projects, sets, posts
- [ ] Add alert for users when opening Flexibox in IE < 10
- [ ] @ tag someone in comments
- [ ] Threaded comments
- [ ] Add visual indicator in comments pane for no existing comments yet
- [ ] Add dropdown for "sorted by" to allow users to change sorting parameter
- [ ] Add versioning system
- [ ] Add notification center for users
- [ ] Add indicator for new actions (comments, uploads) in projects/sets/posts
- [ ] Add indicator for how many people have seen the post
- [ ] Add authentication system for users
- [ ] Add user roles (administrator, editor, viewer)
- [ ]


##Bugs
- [ ] Fix login button - It logs you in without having specified a name.